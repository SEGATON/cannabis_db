{% load thumbnail %}

<div class="container-fluid">
	<div class="row">

		<div class="col-md-2 border_right">
		{% include 'filters/filters.html' %}

		</div>
		<div class="col-md-8">
			<div class="row">
				<div class="col-lg-12">
					<div class="row">
						<div class="col-md-3"></div>
						<div class="col-md-3"></div>
						<div class="col-md-3">
							{% include 'filters/view_layouts_menu.html' %}
						</div>
						<div class="col-md-3">
							{% include 'filters/sorting.html' %}</div>
						</div>
					</div>
					
				</div>
			
				<div class="col-lg-12">
					
					{% include 'catalog/layout_views/grid_view_layout.html' %}
					
				</div>
		
				<div class="col-lg-12">
					{% include 'catalog/layout_views/list_view_layout.html' %}
				</div>
			
				<div class="col-lg-12">
					{% include 'catalog/layout_views/card_view_layout.html' %}
				</div>
		
			</div>
		</div>
		<div class="col-md-2">
			<style type="text/css">
#grid_view, #list_view, #card_view {
  display: none;
}

.view-grid #grid_view {
  display: block;
}

.view-list #list_view {
  display: block;
}

.view-card #card_view {
  display: block;
}

			</style>
			<script>
  (function() {
    const view = localStorage.getItem('preferredView') || 'grid';
    document.documentElement.classList.add('view-' + view);
  })();
</script>

<script type="text/javascript">
    function showView(view) {
        $('#grid_view, #list_view, #card_view').hide();
        if (view === 'grid') {
            $('#grid_view').fadeIn(100);
        } else if (view === 'list') {
            $('#list_view').fadeIn(100);
        } else if (view === 'card') {
            $('#card_view').fadeIn(100);
        }
        localStorage.setItem('preferredView', view);
    }

    $("#toggle_to_grid_view").on("click", function () {
        showView('grid');
    });

    $("#toggle_to_list_view").on("click", function () {
        showView('list');
    });

    $("#toggle_to_card_view").on("click", function () {
        showView('card');
    });

    // On page load, check and apply stored preference
    $(document).ready(function () {
        const savedView = localStorage.getItem('preferredView') || 'grid';
        showView(savedView);
    });
</script>
		</div>
	</div>

</div>







